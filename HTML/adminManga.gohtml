{{define "adminManga"}}
<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <link href="/static/adminStyles.css" rel="stylesheet">
  <link rel="icon" href="/static/favicon.ico" type="image/x-icon">
  <script src="/static/adminScript.js" charset="utf-8"></script>
  <title>Noname site</title>
</head>
  <body onload="onload()">
    <div class="Content">
      <div>
        <iframe name="dummyframe" hidden></iframe>
        <p><span>Manga Info</span></p>
        <table>
          <thead>
            <th>Name</th>
            <th>Url</th>
            <th>Size</th>
            <th>SrcUrl</th>
            <th>AddDate</th>
            <th>UpdDate</th>
            <th>Link</th>
            <th>Actions</th>
          </thead>
          <tbody>
            <tr>
              <td>{{.Manga.Name}}</td>
              <td>{{.Manga.Url}}</td>
              <td>{{.Manga.Size}}</td>
              <td>{{.Manga.SrcUrl}}</td>
              <td>{{.Manga.AddDate}}</td>
              <td>{{.Manga.UpdDate}}</td>
              <td><a href="/manga/{{.Manga.Url}}">{{.Manga.Name}}</a></td>
              <td>
                <form target="dummyframe" action="http://api.{{$.PublicUrl}}/manga/{{.Manga.Url}}" method="POST" enctype="multipart/form-data">
                  <input type="text" name="action" value="update" hidden>
                  <input type="submit" value="Update">
                </form>
                <form target="dummyframe" action="http://api.{{$.PublicUrl}}/manga/{{.Manga.Url}}" method="POST" enctype="multipart/form-data">
                  <input type="text" name="action" value="remove" hidden>
                  <input type="submit" value="Delete">
                </form>
                <form target="dummyframe" action="http://api.{{$.PublicUrl}}/manga/{{.Manga.Url}}" method="POST" enctype="multipart/form-data">
                  <input type="text" name="action" value="changeName" hidden>
                  <input type="text" name="name" placeholder="{{.Manga.Name}}" onclick="this.value='{{.Manga.Name}}'">
                  <input type="submit" value="Change name">
                </form>
                <form target="dummyframe" action="http://api.{{$.PublicUrl}}/manga/{{.Manga.Url}}" method="POST" enctype="multipart/form-data">
                  <input type="text" name="action" value="addTitle" hidden>
                  <input type="file" name="file">
                  <input type="submit" value="Add title">
                </form>
              </td>
            </tr>
          </tbody>
        </table>
        <table>
          <thead>
            <th>Name</th>
            <th>Actions</th>
            <th>Image</th>
          </thead>
          <tbody>
            {{range $title := .Manga.Titles}}
            <tr>
              <td>{{$title}}</td>
              <td>
                <form target="dummyframe" action="http://api.{{$.PublicUrl}}/manga/{{$.Manga.Url}}" method="POST" enctype="multipart/form-data">
                  <input type="text" name="action" value="remTitle" hidden>
                  <input type="text" name="fileName" value="{{$title}}" hidden>
                  <input type="submit" value="Delete title">
                </form>
              </td>
              <td><img src="http://img.{{$.PublicUrl}}/images/mangaTitles/{{$.Manga.Url}}/{{$title}}"></td>
            </tr>            
            {{end}}
          </tbody>
        </table>
        <table>
          <thead>
            <th>Chapter number</th>
            <th>Chapter name</th>
            <th>Actions</th>
          </thead>
          <tbody>
            {{range $chapter := .Manga.Chapters}}
            <tr>
              <td>{{$chapter.Number}}</td>
              <td>{{$chapter.Name}}</td>
              <td>
                <form target="dummyframe" action="http://api.{{$.PublicUrl}}/manga/{{$.Manga.Url}}/{{$chapter.Number}}" method="POST" enctype="multipart/form-data">
                  <input type="text" name="action" value="changeName" hidden>
                  <input type="text" name="fileName" placeholder="{{$chapter.Name}}" onclick="this.value='{{$chapter.Name}}'">
                  <input type="submit" value="Change Name">
                </form>
                <form target="dummyframe" action="http://api.{{$.PublicUrl}}/manga/{{$.Manga.Url}}/{{$chapter.Number}}" method="POST" enctype="multipart/form-data">
                  <input type="text" name="action" value="remove" hidden>
                  <input type="submit" value="Delete Chapter">
                </form>                
              </td>
            </tr>
            {{end}}
          </tbody>
        </table>
      </div>
    </div>
  </body>
</html>
{{end}}